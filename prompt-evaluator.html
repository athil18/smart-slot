<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Prompt Evaluator</title>
    <style>
        :root {
            --bg-primary: #0f172a;
            --bg-secondary: #1e293b;
            --bg-card: #334155;
            --text-primary: #f8fafc;
            --text-secondary: #94a3b8;
            --accent: #6366f1;
            --accent-hover: #818cf8;
            --success: #22c55e;
            --warning: #f59e0b;
            --danger: #ef4444;
            --info: #3b82f6;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;
            background: var(--bg-primary);
            color: var(--text-primary);
            min-height: 100vh;
            line-height: 1.6;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 2rem;
        }

        header {
            text-align: center;
            margin-bottom: 2rem;
            padding-bottom: 1.5rem;
            border-bottom: 1px solid var(--bg-card);
        }

        header h1 {
            font-size: 2rem;
            font-weight: 700;
            background: linear-gradient(135deg, var(--accent), #a78bfa);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        header p {
            color: var(--text-secondary);
            margin-top: 0.5rem;
            font-size: 0.95rem;
        }

        .main-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 1.5rem;
        }

        @media (max-width: 900px) {
            .main-grid {
                grid-template-columns: 1fr;
            }
        }

        .card {
            background: var(--bg-secondary);
            border-radius: 12px;
            padding: 1.5rem;
            border: 1px solid var(--bg-card);
        }

        .card h2 {
            font-size: 1rem;
            font-weight: 600;
            margin-bottom: 1rem;
            color: var(--text-secondary);
            text-transform: uppercase;
            letter-spacing: 0.05em;
        }

        textarea {
            width: 100%;
            min-height: 300px;
            background: var(--bg-primary);
            border: 1px solid var(--bg-card);
            border-radius: 8px;
            padding: 1rem;
            color: var(--text-primary);
            font-family: 'Consolas', 'Monaco', monospace;
            font-size: 0.9rem;
            resize: vertical;
            transition: border-color 0.2s;
        }

        textarea:focus {
            outline: none;
            border-color: var(--accent);
        }

        textarea::placeholder {
            color: var(--text-secondary);
            opacity: 0.6;
        }

        .btn {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
            padding: 0.75rem 1.5rem;
            background: var(--accent);
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 0.95rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s;
            margin-top: 1rem;
        }

        .btn:hover {
            background: var(--accent-hover);
            transform: translateY(-1px);
        }

        .btn:active {
            transform: translateY(0);
        }

        .btn-secondary {
            background: var(--bg-card);
        }

        .btn-secondary:hover {
            background: #475569;
        }

        .score-display {
            text-align: center;
            padding: 2rem;
            background: var(--bg-primary);
            border-radius: 12px;
            margin-bottom: 1.5rem;
        }

        .score-circle {
            width: 120px;
            height: 120px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 1rem;
            font-size: 2.5rem;
            font-weight: 700;
            border: 4px solid;
        }

        .score-excellent {
            border-color: var(--success);
            color: var(--success);
        }

        .score-good {
            border-color: var(--info);
            color: var(--info);
        }

        .score-needs-work {
            border-color: var(--warning);
            color: var(--warning);
        }

        .score-poor {
            border-color: var(--danger);
            color: var(--danger);
        }

        .score-label {
            font-size: 1.1rem;
            font-weight: 600;
        }

        .dimension-list {
            display: flex;
            flex-direction: column;
            gap: 0.75rem;
        }

        .dimension-item {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 0.75rem 1rem;
            background: var(--bg-primary);
            border-radius: 8px;
        }

        .dimension-name {
            font-weight: 500;
            font-size: 0.9rem;
        }

        .dimension-bar {
            width: 100px;
            height: 6px;
            background: var(--bg-card);
            border-radius: 3px;
            overflow: hidden;
            margin: 0 1rem;
            flex-shrink: 0;
        }

        .dimension-fill {
            height: 100%;
            border-radius: 3px;
            transition: width 0.5s ease;
        }

        .dimension-score {
            font-weight: 600;
            font-size: 0.85rem;
            min-width: 35px;
            text-align: right;
        }

        .issues-list {
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
            margin-top: 1rem;
        }

        .issue-item {
            display: flex;
            align-items: flex-start;
            gap: 0.75rem;
            padding: 0.75rem;
            background: var(--bg-primary);
            border-radius: 8px;
            border-left: 3px solid;
        }

        .issue-high {
            border-left-color: var(--danger);
        }

        .issue-medium {
            border-left-color: var(--warning);
        }

        .issue-low {
            border-left-color: var(--info);
        }

        .issue-badge {
            font-size: 0.7rem;
            font-weight: 700;
            text-transform: uppercase;
            padding: 0.2rem 0.5rem;
            border-radius: 4px;
            flex-shrink: 0;
        }

        .issue-high .issue-badge {
            background: var(--danger);
        }

        .issue-medium .issue-badge {
            background: var(--warning);
            color: #000;
        }

        .issue-low .issue-badge {
            background: var(--info);
        }

        .issue-text {
            font-size: 0.9rem;
            color: var(--text-secondary);
        }

        .suggestions-box {
            background: var(--bg-primary);
            border-radius: 8px;
            padding: 1rem;
            margin-top: 1rem;
            font-family: 'Consolas', 'Monaco', monospace;
            font-size: 0.85rem;
            white-space: pre-wrap;
            max-height: 200px;
            overflow-y: auto;
        }

        .empty-state {
            text-align: center;
            padding: 3rem;
            color: var(--text-secondary);
        }

        .empty-state svg {
            width: 64px;
            height: 64px;
            margin-bottom: 1rem;
            opacity: 0.5;
        }

        .actions {
            display: flex;
            gap: 0.5rem;
            flex-wrap: wrap;
        }

        .hidden {
            display: none;
        }
    </style>
</head>

<body>
    <div class="container">
        <header>
            <h1>‚ö° Prompt Evaluator</h1>
            <p>Analyze, score, and optimize your AI prompts instantly</p>
        </header>

        <div class="main-grid">
            <!-- Input Panel -->
            <div class="card">
                <h2>üìù Your Prompt</h2>
                <textarea id="promptInput"
                    placeholder="Paste your prompt here...

Example:
You are a helpful assistant. Summarize the following customer reviews and identify the main issues. Be concise but comprehensive. Output should be useful for the product team."></textarea>
                <div class="actions">
                    <button class="btn" onclick="analyzePrompt()">üîç Analyze Prompt</button>
                    <button class="btn btn-secondary" onclick="clearAll()">Clear</button>
                </div>
            </div>

            <!-- Results Panel -->
            <div class="card">
                <h2>üìä Analysis Results</h2>

                <div id="emptyState" class="empty-state">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5"
                            d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z" />
                    </svg>
                    <p>Paste a prompt and click "Analyze" to see results</p>
                </div>

                <div id="resultsContainer" class="hidden">
                    <!-- Score Display -->
                    <div class="score-display">
                        <div id="scoreCircle" class="score-circle score-good">
                            <span id="scoreValue">0</span>
                        </div>
                        <div id="scoreLabel" class="score-label">Analyzing...</div>
                    </div>

                    <!-- Dimension Breakdown -->
                    <h3 style="font-size: 0.85rem; color: var(--text-secondary); margin-bottom: 0.75rem;">DIMENSION
                        SCORES</h3>
                    <div id="dimensionList" class="dimension-list"></div>

                    <!-- Issues -->
                    <h3
                        style="font-size: 0.85rem; color: var(--text-secondary); margin-top: 1.5rem; margin-bottom: 0.5rem;">
                        ISSUES FOUND</h3>
                    <div id="issuesList" class="issues-list"></div>

                    <!-- Export -->
                    <div class="actions" style="margin-top: 1.5rem;">
                        <button class="btn btn-secondary" onclick="copyReport()">üìã Copy Report</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // ==================== ANALYSIS ENGINE ====================

        const VAGUE_WORDS = [
            'good', 'bad', 'nice', 'great', 'better', 'best', 'some', 'many',
            'few', 'several', 'various', 'appropriate', 'suitable', 'proper',
            'reasonable', 'significant', 'considerable', 'substantial', 'adequate',
            'sufficient', 'relevant', 'important', 'useful', 'helpful', 'effective',
            'efficient', 'optimal', 'ideal', 'perfect', 'excellent', 'outstanding'
        ];

        const ACTION_VERBS = [
            'analyze', 'create', 'write', 'generate', 'summarize', 'explain',
            'describe', 'list', 'identify', 'extract', 'compare', 'evaluate',
            'classify', 'translate', 'convert', 'calculate', 'determine', 'find',
            'suggest', 'recommend', 'propose', 'design', 'develop', 'build',
            'implement', 'review', 'assess', 'critique', 'edit', 'rewrite',
            'format', 'organize', 'prioritize', 'rank', 'sort', 'filter'
        ];

        const CONTRADICTION_PAIRS = [
            ['concise', 'comprehensive'],
            ['brief', 'detailed'],
            ['short', 'thorough'],
            ['simple', 'complex'],
            ['minimal', 'exhaustive']
        ];

        function analyzePrompt() {
            const prompt = document.getElementById('promptInput').value.trim();
            if (!prompt) {
                alert('Please enter a prompt to analyze.');
                return;
            }

            const results = runAnalysis(prompt);
            displayResults(results);
        }

        function runAnalysis(prompt) {
            const words = prompt.toLowerCase().split(/\s+/);
            const sentences = prompt.split(/[.!?]+/).filter(s => s.trim());

            const dimensions = {
                structure: analyzeStructure(prompt, words, sentences),
                clarity: analyzeClarity(prompt, words, sentences),
                completeness: analyzeCompleteness(prompt, words),
                specificity: analyzeSpecificity(prompt, words),
                format: analyzeFormat(prompt)
            };

            const issues = collectIssues(dimensions);
            const overallScore = calculateOverallScore(dimensions);

            return {
                score: overallScore,
                dimensions,
                issues,
                prompt
            };
        }

        function analyzeStructure(prompt, words, sentences) {
            const checks = [];
            let score = 0;
            let maxScore = 0;

            // Check for action verbs
            maxScore += 25;
            const hasActionVerb = ACTION_VERBS.some(verb =>
                words.includes(verb) || words.some(w => w.startsWith(verb))
            );
            if (hasActionVerb) {
                score += 25;
            } else {
                checks.push({ issue: 'No clear action verb found (e.g., analyze, create, summarize)', severity: 'high' });
            }

            // Check for contradictions
            maxScore += 25;
            let hasContradiction = false;
            for (const [word1, word2] of CONTRADICTION_PAIRS) {
                if (words.includes(word1) && words.includes(word2)) {
                    hasContradiction = true;
                    checks.push({ issue: `Contradiction detected: "${word1}" vs "${word2}"`, severity: 'high' });
                    break;
                }
            }
            if (!hasContradiction) score += 25;

            // Check length appropriateness
            maxScore += 25;
            if (words.length < 10) {
                checks.push({ issue: 'Prompt may be too short (< 10 words) - lacks detail', severity: 'medium' });
            } else if (words.length > 500) {
                checks.push({ issue: 'Prompt may be too long (> 500 words) - consider condensing', severity: 'low' });
            } else {
                score += 25;
            }

            // Check sentence count
            maxScore += 25;
            if (sentences.length < 2) {
                checks.push({ issue: 'Only one sentence - may lack sufficient instruction', severity: 'low' });
            } else {
                score += 25;
            }

            return {
                name: 'Structure',
                score: Math.round((score / maxScore) * 100),
                checks
            };
        }

        function analyzeClarity(prompt, words, sentences) {
            const checks = [];
            let score = 0;
            let maxScore = 0;

            // Check for vague words
            maxScore += 40;
            const vagueFound = VAGUE_WORDS.filter(v => words.includes(v));
            if (vagueFound.length === 0) {
                score += 40;
            } else if (vagueFound.length <= 2) {
                score += 25;
                checks.push({ issue: `Vague terms found: "${vagueFound.join('", "')}" - consider being more specific`, severity: 'low' });
            } else {
                score += 10;
                checks.push({ issue: `Multiple vague terms: "${vagueFound.slice(0, 3).join('", "')}"... - reduces precision`, severity: 'medium' });
            }

            // Average sentence length
            maxScore += 30;
            const avgSentenceLength = words.length / Math.max(sentences.length, 1);
            if (avgSentenceLength > 35) {
                checks.push({ issue: 'Sentences are very long - consider breaking them up', severity: 'medium' });
            } else if (avgSentenceLength < 5) {
                checks.push({ issue: 'Sentences are very short - may lack context', severity: 'low' });
                score += 15;
            } else {
                score += 30;
            }

            // Check for ambiguous pronouns without context
            maxScore += 30;
            const ambiguousPronouns = ['it', 'this', 'that', 'they', 'them'];
            const firstWords = sentences.map(s => s.trim().split(/\s+/)[0]?.toLowerCase());
            const startsWithPronoun = firstWords.some(w => ambiguousPronouns.includes(w));
            if (startsWithPronoun) {
                score += 15;
                checks.push({ issue: 'Sentence starts with pronoun - referent may be unclear', severity: 'low' });
            } else {
                score += 30;
            }

            return {
                name: 'Clarity',
                score: Math.round((score / maxScore) * 100),
                checks
            };
        }

        function analyzeCompleteness(prompt, words) {
            const checks = [];
            let score = 0;
            let maxScore = 0;

            // Check for role/persona
            maxScore += 25;
            const hasRole = /you are|act as|as a|your role|assume the role/i.test(prompt);
            if (hasRole) {
                score += 25;
            } else {
                checks.push({ issue: 'No role/persona defined - may affect response style', severity: 'low' });
            }

            // Check for constraints
            maxScore += 25;
            const hasConstraints = /do not|don't|avoid|never|only|must not|should not|exclude|without/i.test(prompt);
            if (hasConstraints) {
                score += 25;
            } else {
                checks.push({ issue: 'No constraints/boundaries specified - model may over-scope', severity: 'medium' });
            }

            // Check for output specification
            maxScore += 25;
            const hasOutput = /output|format|structure|return|provide|give me|respond with|in the form of/i.test(prompt);
            if (hasOutput) {
                score += 25;
            } else {
                checks.push({ issue: 'No output format specified - may get inconsistent structures', severity: 'high' });
            }

            // Check for context/input marker
            maxScore += 25;
            const hasContext = /following|below|above|here|provided|given|input:|text:|data:/i.test(prompt);
            if (hasContext) {
                score += 25;
            } else {
                checks.push({ issue: 'No clear input/context marker - model may not know what to process', severity: 'medium' });
            }

            return {
                name: 'Completeness',
                score: Math.round((score / maxScore) * 100),
                checks
            };
        }

        function analyzeSpecificity(prompt, words) {
            const checks = [];
            let score = 0;
            let maxScore = 0;

            // Check for numbers/quantities
            maxScore += 35;
            const hasNumbers = /\d+|one|two|three|four|five|first|second|third|top \d|at least|at most|maximum|minimum/i.test(prompt);
            if (hasNumbers) {
                score += 35;
            } else {
                checks.push({ issue: 'No specific quantities - consider adding numbers (e.g., "top 5", "at least 3")', severity: 'medium' });
            }

            // Check for examples
            maxScore += 35;
            const hasExamples = /example|e\.g\.|for instance|such as|like this|```|".*"/i.test(prompt);
            if (hasExamples) {
                score += 35;
            } else {
                checks.push({ issue: 'No examples provided - examples reduce ambiguity', severity: 'low' });
            }

            // Check for success criteria
            maxScore += 30;
            const hasSuccess = /goal|objective|success|should result in|aim|purpose|so that|in order to/i.test(prompt);
            if (hasSuccess) {
                score += 30;
            } else {
                checks.push({ issue: 'No success criteria defined - harder to verify correct output', severity: 'low' });
            }

            return {
                name: 'Specificity',
                score: Math.round((score / maxScore) * 100),
                checks
            };
        }

        function analyzeFormat(prompt) {
            const checks = [];
            let score = 0;
            let maxScore = 0;

            // Check for formatting instructions
            maxScore += 50;
            const hasFormatting = /bullet|numbered|list|table|markdown|json|xml|heading|section|paragraph/i.test(prompt);
            if (hasFormatting) {
                score += 50;
            } else {
                checks.push({ issue: 'No format preference specified (bullets, tables, etc.)', severity: 'low' });
            }

            // Check for length guidance
            maxScore += 50;
            const hasLength = /word|sentence|paragraph|brief|detailed|concise|short|long|summary|comprehensive|\d+ words|\d+ sentences/i.test(prompt);
            if (hasLength) {
                score += 50;
            } else {
                checks.push({ issue: 'No length guidance - output length may vary wildly', severity: 'medium' });
            }

            return {
                name: 'Format',
                score: Math.round((score / maxScore) * 100),
                checks
            };
        }

        function collectIssues(dimensions) {
            const allIssues = [];
            for (const dim of Object.values(dimensions)) {
                for (const check of dim.checks) {
                    allIssues.push(check);
                }
            }
            // Sort by severity
            const severityOrder = { high: 0, medium: 1, low: 2 };
            allIssues.sort((a, b) => severityOrder[a.severity] - severityOrder[b.severity]);
            return allIssues;
        }

        function calculateOverallScore(dimensions) {
            const weights = {
                structure: 0.25,
                clarity: 0.20,
                completeness: 0.25,
                specificity: 0.15,
                format: 0.15
            };

            let total = 0;
            for (const [key, dim] of Object.entries(dimensions)) {
                total += dim.score * weights[key];
            }
            return Math.round(total);
        }

        // ==================== UI RENDERING ====================

        function displayResults(results) {
            document.getElementById('emptyState').classList.add('hidden');
            document.getElementById('resultsContainer').classList.remove('hidden');

            // Score circle
            const scoreCircle = document.getElementById('scoreCircle');
            const scoreValue = document.getElementById('scoreValue');
            const scoreLabel = document.getElementById('scoreLabel');

            scoreValue.textContent = results.score;
            scoreCircle.className = 'score-circle ' + getScoreClass(results.score);
            scoreLabel.textContent = getScoreLabel(results.score);

            // Dimension list
            const dimensionList = document.getElementById('dimensionList');
            dimensionList.innerHTML = '';
            for (const dim of Object.values(results.dimensions)) {
                const item = document.createElement('div');
                item.className = 'dimension-item';
                item.innerHTML = `
                    <span class="dimension-name">${dim.name}</span>
                    <div class="dimension-bar">
                        <div class="dimension-fill" style="width: ${dim.score}%; background: ${getScoreColor(dim.score)};"></div>
                    </div>
                    <span class="dimension-score" style="color: ${getScoreColor(dim.score)};">${dim.score}%</span>
                `;
                dimensionList.appendChild(item);
            }

            // Issues list
            const issuesList = document.getElementById('issuesList');
            issuesList.innerHTML = '';
            if (results.issues.length === 0) {
                issuesList.innerHTML = '<div style="color: var(--success); padding: 1rem;">‚úì No issues found!</div>';
            } else {
                for (const issue of results.issues) {
                    const item = document.createElement('div');
                    item.className = 'issue-item issue-' + issue.severity;
                    item.innerHTML = `
                        <span class="issue-badge">${issue.severity}</span>
                        <span class="issue-text">${issue.issue}</span>
                    `;
                    issuesList.appendChild(item);
                }
            }

            // Store results for export
            window.lastResults = results;
        }

        function getScoreClass(score) {
            if (score >= 80) return 'score-excellent';
            if (score >= 60) return 'score-good';
            if (score >= 40) return 'score-needs-work';
            return 'score-poor';
        }

        function getScoreLabel(score) {
            if (score >= 80) return '‚úì Production Ready';
            if (score >= 60) return '‚ö† Needs Polish';
            if (score >= 40) return 'üîß Needs Rework';
            return '‚úó Major Issues';
        }

        function getScoreColor(score) {
            if (score >= 80) return 'var(--success)';
            if (score >= 60) return 'var(--info)';
            if (score >= 40) return 'var(--warning)';
            return 'var(--danger)';
        }

        function clearAll() {
            document.getElementById('promptInput').value = '';
            document.getElementById('emptyState').classList.remove('hidden');
            document.getElementById('resultsContainer').classList.add('hidden');
        }

        function copyReport() {
            if (!window.lastResults) return;

            const r = window.lastResults;
            let report = `# Prompt Evaluation Report\n\n`;
            report += `## Overall Score: ${r.score}/100 - ${getScoreLabel(r.score)}\n\n`;
            report += `## Dimension Breakdown\n`;
            for (const dim of Object.values(r.dimensions)) {
                report += `- **${dim.name}**: ${dim.score}%\n`;
            }
            report += `\n## Issues Found (${r.issues.length})\n`;
            for (const issue of r.issues) {
                report += `- [${issue.severity.toUpperCase()}] ${issue.issue}\n`;
            }
            report += `\n## Original Prompt\n\`\`\`\n${r.prompt}\n\`\`\``;

            navigator.clipboard.writeText(report).then(() => {
                alert('Report copied to clipboard!');
            });
        }
    </script>
</body>

</html>